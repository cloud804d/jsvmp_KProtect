!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VM=t()}(this,(function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(r=a.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?i:String(i)),a)}var r,i}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var r=[Array,ArrayBuffer,Atomics,Boolean,DataView,Date,Error,EvalError,Float32Array,Float64Array,Function,1/0,Int16Array,Int32Array,Int8Array,JSON,Map,Math,NaN,Number,Object,Promise,Proxy,RangeError,ReferenceError,Reflect,RegExp,Set,String,Symbol,SyntaxError,TypeError,URIError,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray,WeakMap,WeakSet,console,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,eval,isFinite,isNaN,parseFloat,parseInt,void 0,unescape,"window"];function i(e){for(var t=e.length;--t>=0;)e[t]=0}i(new Array(576)),i(new Array(60)),i(new Array(512)),i(new Array(256)),i(new Array(29)),i(new Array(30));var o=function(e,t,n,a){for(var r=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(r=r+t[a++]|0)|0}while(--o);r%=65521,i%=65521}return r|i<<16|0},s=new Uint32Array(function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),c=function(e,t,n,a){var r=s,i=a+n;e^=-1;for(var o=a;o<i;o++)e=e>>>8^r[255&(e^t[o])];return-1^e},l={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},d={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},h=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f=function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var a=n.shift();if(a){if("object"!==e(a))throw new TypeError(a+"must be non-object");for(var r in a)h(a,r)&&(t[r]=a[r])}}return t},u=function(e){for(var t=0,n=0,a=e.length;n<a;n++)t+=e[n].length;for(var r=new Uint8Array(t),i=0,o=0,s=e.length;i<s;i++){var c=e[i];r.set(c,o),o+=c.length}return r},k=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){k=!1}for(var w=new Uint8Array(256),b=0;b<256;b++)w[b]=b>=252?6:b>=248?5:b>=240?4:b>=224?3:b>=192?2:1;w[254]=w[254]=1;var g=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,a,r,i,o=e.length,s=0;for(r=0;r<o;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(a=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(a-56320),r++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),i=0,r=0;i<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(a=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(a-56320),r++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},m=function(e,t){var n,a,r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*r);for(a=0,n=0;n<r;){var o=e[n++];if(o<128)i[a++]=o;else{var s=w[o];if(s>4)i[a++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&n<r;)o=o<<6|63&e[n++],s--;s>1?i[a++]=65533:o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&k)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}(i,a)},p=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+w[e[n]]>t?n:t};var v=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},y=16209,_=function(e,t){var n,a,r,i,o,s,c,l,d,h,f,u,k,w,b,g,m,p,v,_,x,A,E,R,S=e.state;n=e.next_in,E=e.input,a=n+(e.avail_in-5),r=e.next_out,R=e.output,i=r-(t-e.avail_out),o=r+(e.avail_out-257),s=S.dmax,c=S.wsize,l=S.whave,d=S.wnext,h=S.window,f=S.hold,u=S.bits,k=S.lencode,w=S.distcode,b=(1<<S.lenbits)-1,g=(1<<S.distbits)-1;e:do{u<15&&(f+=E[n++]<<u,u+=8,f+=E[n++]<<u,u+=8),m=k[f&b];t:for(;;){if(f>>>=p=m>>>24,u-=p,0===(p=m>>>16&255))R[r++]=65535&m;else{if(!(16&p)){if(0==(64&p)){m=k[(65535&m)+(f&(1<<p)-1)];continue t}if(32&p){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=y;break e}v=65535&m,(p&=15)&&(u<p&&(f+=E[n++]<<u,u+=8),v+=f&(1<<p)-1,f>>>=p,u-=p),u<15&&(f+=E[n++]<<u,u+=8,f+=E[n++]<<u,u+=8),m=w[f&g];n:for(;;){if(f>>>=p=m>>>24,u-=p,!(16&(p=m>>>16&255))){if(0==(64&p)){m=w[(65535&m)+(f&(1<<p)-1)];continue n}e.msg="invalid distance code",S.mode=y;break e}if(_=65535&m,u<(p&=15)&&(f+=E[n++]<<u,(u+=8)<p&&(f+=E[n++]<<u,u+=8)),(_+=f&(1<<p)-1)>s){e.msg="invalid distance too far back",S.mode=y;break e}if(f>>>=p,u-=p,_>(p=r-i)){if((p=_-p)>l&&S.sane){e.msg="invalid distance too far back",S.mode=y;break e}if(x=0,A=h,0===d){if(x+=c-p,p<v){v-=p;do{R[r++]=h[x++]}while(--p);x=r-_,A=R}}else if(d<p){if(x+=c+d-p,(p-=d)<v){v-=p;do{R[r++]=h[x++]}while(--p);if(x=0,d<v){v-=p=d;do{R[r++]=h[x++]}while(--p);x=r-_,A=R}}}else if(x+=d-p,p<v){v-=p;do{R[r++]=h[x++]}while(--p);x=r-_,A=R}for(;v>2;)R[r++]=A[x++],R[r++]=A[x++],R[r++]=A[x++],v-=3;v&&(R[r++]=A[x++],v>1&&(R[r++]=A[x++]))}else{x=r-_;do{R[r++]=R[x++],R[r++]=R[x++],R[r++]=R[x++],v-=3}while(v>2);v&&(R[r++]=R[x++],v>1&&(R[r++]=R[x++]))}break}}break}}while(n<a&&r<o);n-=v=u>>3,f&=(1<<(u-=v<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<o?o-r+257:257-(r-o),S.hold=f,S.bits=u},x=15,A=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),E=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),R=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),S=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),T=function(e,t,n,a,r,i,o,s){var c,l,d,h,f,u,k,w,b,g=s.bits,m=0,p=0,v=0,y=0,_=0,T=0,U=0,Z=0,C=0,O=0,I=null,H=new Uint16Array(16),N=new Uint16Array(16),B=null;for(m=0;m<=x;m++)H[m]=0;for(p=0;p<a;p++)H[t[n+p]]++;for(_=g,y=x;y>=1&&0===H[y];y--);if(_>y&&(_=y),0===y)return r[i++]=20971520,r[i++]=20971520,s.bits=1,0;for(v=1;v<y&&0===H[v];v++);for(_<v&&(_=v),Z=1,m=1;m<=x;m++)if(Z<<=1,(Z-=H[m])<0)return-1;if(Z>0&&(0===e||1!==y))return-1;for(N[1]=0,m=1;m<x;m++)N[m+1]=N[m]+H[m];for(p=0;p<a;p++)0!==t[n+p]&&(o[N[t[n+p]]++]=p);if(0===e?(I=B=o,u=20):1===e?(I=A,B=E,u=257):(I=R,B=S,u=0),O=0,p=0,m=v,f=i,T=_,U=0,d=-1,h=(C=1<<_)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){k=m-U,o[p]+1<u?(w=0,b=o[p]):o[p]>=u?(w=B[o[p]-u],b=I[o[p]-u]):(w=96,b=0),c=1<<m-U,v=l=1<<T;do{r[f+(O>>U)+(l-=c)]=k<<24|w<<16|b|0}while(0!==l);for(c=1<<m-1;O&c;)c>>=1;if(0!==c?(O&=c-1,O+=c):O=0,p++,0==--H[m]){if(m===y)break;m=t[n+o[p]]}if(m>_&&(O&h)!==d){for(0===U&&(U=_),f+=v,Z=1<<(T=m-U);T+U<y&&!((Z-=H[T+U])<=0);)T++,Z<<=1;if(C+=1<<T,1===e&&C>852||2===e&&C>592)return 1;r[d=O&h]=_<<24|T<<16|f-i|0}}return 0!==O&&(r[f+O]=m-U<<24|64<<16|0),s.bits=_,0},U=d.Z_FINISH,Z=d.Z_BLOCK,C=d.Z_TREES,O=d.Z_OK,I=d.Z_STREAM_END,H=d.Z_NEED_DICT,N=d.Z_STREAM_ERROR,B=d.Z_DATA_ERROR,D=d.Z_MEM_ERROR,F=d.Z_BUF_ERROR,L=d.Z_DEFLATED,M=16180,P=16190,z=16191,j=16192,V=16194,K=16199,G=16200,W=16206,Y=16209,J=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function X(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var $,q,Q=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<M||t.mode>16211?1:0},ee=function(e){if(Q(e))return N;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=M,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,O},te=function(e){if(Q(e))return N;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ee(e)},ne=function(e,t){var n;if(Q(e))return N;var a=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?N:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,te(e))},ae=function(e,t){if(!e)return N;var n=new X;e.state=n,n.strm=e,n.window=null,n.mode=M;var a=ne(e,t);return a!==O&&(e.state=null),a},re=!0,ie=function(e){if(re){$=new Int32Array(512),q=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(T(1,e.lens,0,288,$,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;T(2,e.lens,0,32,q,0,e.work,{bits:5}),re=!1}e.lencode=$,e.lenbits=9,e.distcode=q,e.distbits=5},oe=function(e,t,n,a){var r,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):((r=i.wsize-i.wnext)>a&&(r=a),i.window.set(t.subarray(n-a,n-a+r),i.wnext),(a-=r)?(i.window.set(t.subarray(n-a,n),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0},se={inflateReset:te,inflateReset2:ne,inflateResetKeep:ee,inflateInit:function(e){return ae(e,15)},inflateInit2:ae,inflate:function(e,t){var n,a,r,i,s,l,d,h,f,u,k,w,b,g,m,p,v,y,x,A,E,R,S,X,$=0,q=new Uint8Array(4),ee=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Q(e)||!e.output||!e.input&&0!==e.avail_in)return N;(n=e.state).mode===z&&(n.mode=j),s=e.next_out,r=e.output,d=e.avail_out,i=e.next_in,a=e.input,l=e.avail_in,h=n.hold,f=n.bits,u=l,k=d,R=O;e:for(;;)switch(n.mode){case M:if(0===n.wrap){n.mode=j;break}for(;f<16;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(2&n.wrap&&35615===h){0===n.wbits&&(n.wbits=15),n.check=0,q[0]=255&h,q[1]=h>>>8&255,n.check=c(n.check,q,2,0),h=0,f=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=Y;break}if((15&h)!==L){e.msg="unknown compression method",n.mode=Y;break}if(f-=4,E=8+(15&(h>>>=4)),0===n.wbits&&(n.wbits=E),E>15||E>n.wbits){e.msg="invalid window size",n.mode=Y;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&h?16189:z,h=0,f=0;break;case 16181:for(;f<16;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(n.flags=h,(255&n.flags)!==L){e.msg="unknown compression method",n.mode=Y;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Y;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&4&n.wrap&&(q[0]=255&h,q[1]=h>>>8&255,n.check=c(n.check,q,2,0)),h=0,f=0,n.mode=16182;case 16182:for(;f<32;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}n.head&&(n.head.time=h),512&n.flags&&4&n.wrap&&(q[0]=255&h,q[1]=h>>>8&255,q[2]=h>>>16&255,q[3]=h>>>24&255,n.check=c(n.check,q,4,0)),h=0,f=0,n.mode=16183;case 16183:for(;f<16;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&4&n.wrap&&(q[0]=255&h,q[1]=h>>>8&255,n.check=c(n.check,q,2,0)),h=0,f=0,n.mode=16184;case 16184:if(1024&n.flags){for(;f<16;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&4&n.wrap&&(q[0]=255&h,q[1]=h>>>8&255,n.check=c(n.check,q,2,0)),h=0,f=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((w=n.length)>l&&(w=l),w&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(a.subarray(i,i+w),E)),512&n.flags&&4&n.wrap&&(n.check=c(n.check,a,w,i)),l-=w,i+=w,n.length-=w),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===l)break e;w=0;do{E=a[i+w++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&w<l);if(512&n.flags&&4&n.wrap&&(n.check=c(n.check,a,w,i)),l-=w,i+=w,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===l)break e;w=0;do{E=a[i+w++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&w<l);if(512&n.flags&&4&n.wrap&&(n.check=c(n.check,a,w,i)),l-=w,i+=w,E)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;f<16;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(4&n.wrap&&h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Y;break}h=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=z;break;case 16189:for(;f<32;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}e.adler=n.check=J(h),h=0,f=0,n.mode=P;case P:if(0===n.havedict)return e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=l,n.hold=h,n.bits=f,H;e.adler=n.check=1,n.mode=z;case z:if(t===Z||t===C)break e;case j:if(n.last){h>>>=7&f,f-=7&f,n.mode=W;break}for(;f<3;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}switch(n.last=1&h,f-=1,3&(h>>>=1)){case 0:n.mode=16193;break;case 1:if(ie(n),n.mode=K,t===C){h>>>=2,f-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Y}h>>>=2,f-=2;break;case 16193:for(h>>>=7&f,f-=7&f;f<32;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Y;break}if(n.length=65535&h,h=0,f=0,n.mode=V,t===C)break e;case V:n.mode=16195;case 16195:if(w=n.length){if(w>l&&(w=l),w>d&&(w=d),0===w)break e;r.set(a.subarray(i,i+w),s),l-=w,i+=w,d-=w,s+=w,n.length-=w;break}n.mode=z;break;case 16196:for(;f<14;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(n.nlen=257+(31&h),h>>>=5,f-=5,n.ndist=1+(31&h),h>>>=5,f-=5,n.ncode=4+(15&h),h>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Y;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;f<3;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}n.lens[ee[n.have++]]=7&h,h>>>=3,f-=3}for(;n.have<19;)n.lens[ee[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},R=T(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,R){e.msg="invalid code lengths set",n.mode=Y;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;p=($=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,v=65535&$,!((m=$>>>24)<=f);){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(v<16)h>>>=m,f-=m,n.lens[n.have++]=v;else{if(16===v){for(X=m+2;f<X;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(h>>>=m,f-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=Y;break}E=n.lens[n.have-1],w=3+(3&h),h>>>=2,f-=2}else if(17===v){for(X=m+3;f<X;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}f-=m,E=0,w=3+(7&(h>>>=m)),h>>>=3,f-=3}else{for(X=m+7;f<X;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}f-=m,E=0,w=11+(127&(h>>>=m)),h>>>=7,f-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Y;break}for(;w--;)n.lens[n.have++]=E}}if(n.mode===Y)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Y;break}if(n.lenbits=9,S={bits:n.lenbits},R=T(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,R){e.msg="invalid literal/lengths set",n.mode=Y;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},R=T(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,R){e.msg="invalid distances set",n.mode=Y;break}if(n.mode=K,t===C)break e;case K:n.mode=G;case G:if(l>=6&&d>=258){e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=l,n.hold=h,n.bits=f,_(e,k),s=e.next_out,r=e.output,d=e.avail_out,i=e.next_in,a=e.input,l=e.avail_in,h=n.hold,f=n.bits,n.mode===z&&(n.back=-1);break}for(n.back=0;p=($=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,v=65535&$,!((m=$>>>24)<=f);){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(p&&0==(240&p)){for(y=m,x=p,A=v;p=($=n.lencode[A+((h&(1<<y+x)-1)>>y)])>>>16&255,v=65535&$,!(y+(m=$>>>24)<=f);){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}h>>>=y,f-=y,n.back+=y}if(h>>>=m,f-=m,n.back+=m,n.length=v,0===p){n.mode=16205;break}if(32&p){n.back=-1,n.mode=z;break}if(64&p){e.msg="invalid literal/length code",n.mode=Y;break}n.extra=15&p,n.mode=16201;case 16201:if(n.extra){for(X=n.extra;f<X;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;p=($=n.distcode[h&(1<<n.distbits)-1])>>>16&255,v=65535&$,!((m=$>>>24)<=f);){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(0==(240&p)){for(y=m,x=p,A=v;p=($=n.distcode[A+((h&(1<<y+x)-1)>>y)])>>>16&255,v=65535&$,!(y+(m=$>>>24)<=f);){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}h>>>=y,f-=y,n.back+=y}if(h>>>=m,f-=m,n.back+=m,64&p){e.msg="invalid distance code",n.mode=Y;break}n.offset=v,n.extra=15&p,n.mode=16203;case 16203:if(n.extra){for(X=n.extra;f<X;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Y;break}n.mode=16204;case 16204:if(0===d)break e;if(w=k-d,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Y;break}w>n.wnext?(w-=n.wnext,b=n.wsize-w):b=n.wnext-w,w>n.length&&(w=n.length),g=n.window}else g=r,b=s-n.offset,w=n.length;w>d&&(w=d),d-=w,n.length-=w;do{r[s++]=g[b++]}while(--w);0===n.length&&(n.mode=G);break;case 16205:if(0===d)break e;r[s++]=n.length,d--,n.mode=G;break;case W:if(n.wrap){for(;f<32;){if(0===l)break e;l--,h|=a[i++]<<f,f+=8}if(k-=d,e.total_out+=k,n.total+=k,4&n.wrap&&k&&(e.adler=n.check=n.flags?c(n.check,r,k,s-k):o(n.check,r,k,s-k)),k=d,4&n.wrap&&(n.flags?h:J(h))!==n.check){e.msg="incorrect data check",n.mode=Y;break}h=0,f=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;f<32;){if(0===l)break e;l--,h+=a[i++]<<f,f+=8}if(4&n.wrap&&h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Y;break}h=0,f=0}n.mode=16208;case 16208:R=I;break e;case Y:R=B;break e;case 16210:return D;default:return N}return e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=l,n.hold=h,n.bits=f,(n.wsize||k!==e.avail_out&&n.mode<Y&&(n.mode<W||t!==U))&&oe(e,e.output,e.next_out,k-e.avail_out),u-=e.avail_in,k-=e.avail_out,e.total_in+=u,e.total_out+=k,n.total+=k,4&n.wrap&&k&&(e.adler=n.check=n.flags?c(n.check,r,k,e.next_out-k):o(n.check,r,k,e.next_out-k)),e.data_type=n.bits+(n.last?64:0)+(n.mode===z?128:0)+(n.mode===K||n.mode===V?256:0),(0===u&&0===k||t===U)&&R===O&&(R=F),R},inflateEnd:function(e){if(Q(e))return N;var t=e.state;return t.window&&(t.window=null),e.state=null,O},inflateGetHeader:function(e,t){if(Q(e))return N;var n=e.state;return 0==(2&n.wrap)?N:(n.head=t,t.done=!1,O)},inflateSetDictionary:function(e,t){var n,a=t.length;return Q(e)||0!==(n=e.state).wrap&&n.mode!==P?N:n.mode===P&&o(1,t,a,0)!==n.check?B:oe(e,t,a,a)?(n.mode=16210,D):(n.havedict=1,O)},inflateInfo:"pako inflate (from Nodeca project)"};var ce=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},le=Object.prototype.toString,de=d.Z_NO_FLUSH,he=d.Z_FINISH,fe=d.Z_OK,ue=d.Z_STREAM_END,ke=d.Z_NEED_DICT,we=d.Z_STREAM_ERROR,be=d.Z_DATA_ERROR,ge=d.Z_MEM_ERROR;function me(e){this.options=f({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var n=se.inflateInit2(this.strm,t.windowBits);if(n!==fe)throw new Error(l[n]);if(this.header=new ce,se.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=g(t.dictionary):"[object ArrayBuffer]"===le.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=se.inflateSetDictionary(this.strm,t.dictionary))!==fe))throw new Error(l[n])}function pe(e,t){var n=new me(t);if(n.push(e),n.err)throw n.msg||l[n.err];return n.result}me.prototype.push=function(e,t){var n,a,r,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(a=t===~~t?t:!0===t?he:de,"[object ArrayBuffer]"===le.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(n=se.inflate(i,a))===ke&&s&&((n=se.inflateSetDictionary(i,s))===fe?n=se.inflate(i,a):n===be&&(n=ke));i.avail_in>0&&n===ue&&i.state.wrap>0&&0!==e[i.next_in];)se.inflateReset(i),n=se.inflate(i,a);switch(n){case we:case be:case ke:case ge:return this.onEnd(n),this.ended=!0,!1}if(r=i.avail_out,i.next_out&&(0===i.avail_out||n===ue))if("string"===this.options.to){var c=p(i.output,i.next_out),l=i.next_out-c,d=m(i.output,c);i.next_out=l,i.avail_out=o-l,l&&i.output.set(i.output.subarray(c,c+l),0),this.onData(d)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(n!==fe||0!==r){if(n===ue)return n=se.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},me.prototype.onData=function(e){this.chunks.push(e)},me.prototype.onEnd=function(e){e===fe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ve={Inflate:me,inflate:pe,inflateRaw:function(e,t){return(t=t||{}).raw=!0,pe(e,t)},ungzip:pe,constants:d}.inflateRaw,ye=function(){function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.bytecode=this.decodeBytecode(e),this.strings=t,this.dependencies=r.map((function(e){return"window"!==e?e:globalThis})),this.opcodeHandlers=[],this.stack=[],this.localVariables=[],this.lookUpTable=n,this.exitToPreviousContext=[function(e){e.programCounter=e.bytecode.length+1}],this.programCounter=0,this.initOpcodeHandlers()}var i,o,s;return i=a,(o=[{key:"decodeBytecode",value:function(e){var t;t="undefined"!=typeof window?atob(e):Buffer.from(e,"base64").toString("ascii");for(var n=new Uint8Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return ve(n)}},{key:"byteArrayToLong",value:function(e){return e.reverse(),e.reduce((function(e,t){return 256*e+t}))}},{key:"load8ByteArray",value:function(){for(var e=[],t=0;t<8;t++)e.push(this.bytecode[this.programCounter++]);return Uint8Array.from(e)}},{key:"getValue",value:function(){switch(this.bytecode[this.programCounter++]){case 0:var e=this.byteArrayToLong(this.load8ByteArray());return this.strings[e];case 6:return[];case 7:return{};case 1:return this.byteArrayToLong(this.load8ByteArray());case 2:var t=this.stack[this.stack.length];return this.stack.length-=1,t;case 4:var n=this.bytecode[this.programCounter++];return this.dependencies[n];case 3:var a=this.bytecode[this.programCounter++];return this.localVariables[a]}}},{key:"initOpcodeHandlers",value:function(){var t=this;this.opcodeHandlers[0]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t+n},this.opcodeHandlers[1]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t-n},this.opcodeHandlers[2]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t*n},this.opcodeHandlers[3]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t/n},this.opcodeHandlers[4]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t%n},this.opcodeHandlers[5]=function(e){var t=e.stack[e.stack.length-1];e.stack[e.stack.length]=!t},this.opcodeHandlers[14]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t==n},this.opcodeHandlers[6]=function(e){var t=e.getValue();e.localVariables[t]=e.getValue()},this.opcodeHandlers[7]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t[n]},this.opcodeHandlers[13]=function(e){var t=e.stack[e.stack.length-2],a=e.stack[e.stack.length-1];e.stack[e.stack.length]=t.apply(void 0,n(a))},this.opcodeHandlers[24]=function(e){e.stack[e.stack.length]=e.getValue()},this.opcodeHandlers[25]=function(e){var t=e.getValue();e.localVariables[t]=e.stack.pop()},this.opcodeHandlers[26]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=new t(n)},this.opcodeHandlers[19]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t!==n},this.opcodeHandlers[27]=function(e){var t=e.stack[e.stack.length-1];e.stack[e.stack.length]=[t]},this.opcodeHandlers[23]=function(e){var t=e.stack[e.stack.length-1];e.stack[e.stack.length]=!t},this.opcodeHandlers[12]=function(t){var n=t.stack[t.stack.length-1];t.stack[t.stack.length]=e(n)},this.opcodeHandlers[22]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];if(t){var a=e.programCounter;e.exitToPreviousContext.unshift((function(e){e.programCounter=a}));var r=e.lookUpTable[n];if(void 0===r)throw"ILLEGAL JMP";e.programCounter=r}},this.opcodeHandlers[28]=function(e){e.exitToPreviousContext[0](e),e.exitToPreviousContext.shift()},this.opcodeHandlers[35]=function(e){var t=e.stack[e.stack.length-2],n=e.stack[e.stack.length-1];e.stack[e.stack.length]=t&&n},this.opcodeHandlers[36]=function(e){var t=e.stack[e.stack.length-3],n=e.stack[e.stack.length-2],a=e.stack[e.stack.length-1];e.stack[e.stack.length]=t.apply(n,a)},this.opcodeHandlers[37]=function(e){var a,r=e.stack[e.stack.length-3],i=e.stack[e.stack.length-2],o=e.stack[e.stack.length-1];e.stack[e.stack.length]=(a=r[i]).call.apply(a,[t].concat(n(o)))}}},{key:"getInstructionHandler",value:function(e){return this.opcodeHandlers[e]}},{key:"start",value:function(){for(;this.programCounter<this.bytecode.length;){console.log(this.exitToPreviousContext);var e=this.programCounter++,t=this.bytecode[e],n=this.getInstructionHandler(t);if(void 0===n)throw"UNKNOWN_OPCODE";n(this)}}}])&&t(i.prototype,o),s&&t(i,s),Object.defineProperty(i,"prototype",{writable:!1}),a}();return ye}));
