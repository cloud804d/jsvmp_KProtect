!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VM=t()}(this,(function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?i:String(i)),n)}var a,i}function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=[Array,ArrayBuffer,Atomics,Boolean,DataView,Date,Error,EvalError,Float32Array,Float64Array,Function,1/0,Int16Array,Int32Array,Int8Array,JSON,Map,Math,NaN,Number,Object,Promise,Proxy,RangeError,ReferenceError,Reflect,RegExp,Set,String,Symbol,SyntaxError,TypeError,URIError,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray,WeakMap,WeakSet,console,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,eval,isFinite,isNaN,parseFloat,parseInt,void 0,unescape,"window"];function i(e){for(var t=e.length;--t>=0;)e[t]=0}i(new Array(576)),i(new Array(60)),i(new Array(512)),i(new Array(256)),i(new Array(29)),i(new Array(30));var o=function(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{i=i+(a=a+t[n++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},s=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}()),c=function(e,t,r,n){var a=s,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},l={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},d={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},f=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},h=function(t){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var n=r.shift();if(n){if("object"!==e(n))throw new TypeError(n+"must be non-object");for(var a in n)f(n,a)&&(t[a]=n[a])}}return t},u=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var a=new Uint8Array(t),i=0,o=0,s=e.length;i<s;i++){var c=e[i];a.set(c,o),o+=c.length}return a},p=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){p=!1}for(var w=new Uint8Array(256),b=0;b<256;b++)w[b]=b>=252?6:b>=248?5:b>=240?4:b>=224?3:b>=192?2:1;w[254]=w[254]=1;var k=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,a,i,o=e.length,s=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),i=0,a=0;i<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},m=function(e,t){var r,n,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(n=0,r=0;r<a;){var o=e[r++];if(o<128)i[n++]=o;else{var s=w[o];if(s>4)i[n++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<a;)o=o<<6|63&e[r++],s--;s>1?i[n++]=65533:o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&p)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}(i,n)},v=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+w[e[r]]>t?r:t};var y=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},g=16209,_=function(e,t){var r,n,a,i,o,s,c,l,d,f,h,u,p,w,b,k,m,v,y,_,x,A,E,R,S=e.state;r=e.next_in,E=e.input,n=r+(e.avail_in-5),a=e.next_out,R=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),s=S.dmax,c=S.wsize,l=S.whave,d=S.wnext,f=S.window,h=S.hold,u=S.bits,p=S.lencode,w=S.distcode,b=(1<<S.lenbits)-1,k=(1<<S.distbits)-1;e:do{u<15&&(h+=E[r++]<<u,u+=8,h+=E[r++]<<u,u+=8),m=p[h&b];t:for(;;){if(h>>>=v=m>>>24,u-=v,0===(v=m>>>16&255))R[a++]=65535&m;else{if(!(16&v)){if(0==(64&v)){m=p[(65535&m)+(h&(1<<v)-1)];continue t}if(32&v){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=g;break e}y=65535&m,(v&=15)&&(u<v&&(h+=E[r++]<<u,u+=8),y+=h&(1<<v)-1,h>>>=v,u-=v),u<15&&(h+=E[r++]<<u,u+=8,h+=E[r++]<<u,u+=8),m=w[h&k];r:for(;;){if(h>>>=v=m>>>24,u-=v,!(16&(v=m>>>16&255))){if(0==(64&v)){m=w[(65535&m)+(h&(1<<v)-1)];continue r}e.msg="invalid distance code",S.mode=g;break e}if(_=65535&m,u<(v&=15)&&(h+=E[r++]<<u,(u+=8)<v&&(h+=E[r++]<<u,u+=8)),(_+=h&(1<<v)-1)>s){e.msg="invalid distance too far back",S.mode=g;break e}if(h>>>=v,u-=v,_>(v=a-i)){if((v=_-v)>l&&S.sane){e.msg="invalid distance too far back",S.mode=g;break e}if(x=0,A=f,0===d){if(x+=c-v,v<y){y-=v;do{R[a++]=f[x++]}while(--v);x=a-_,A=R}}else if(d<v){if(x+=c+d-v,(v-=d)<y){y-=v;do{R[a++]=f[x++]}while(--v);if(x=0,d<y){y-=v=d;do{R[a++]=f[x++]}while(--v);x=a-_,A=R}}}else if(x+=d-v,v<y){y-=v;do{R[a++]=f[x++]}while(--v);x=a-_,A=R}for(;y>2;)R[a++]=A[x++],R[a++]=A[x++],R[a++]=A[x++],y-=3;y&&(R[a++]=A[x++],y>1&&(R[a++]=A[x++]))}else{x=a-_;do{R[a++]=R[x++],R[a++]=R[x++],R[a++]=R[x++],y-=3}while(y>2);y&&(R[a++]=R[x++],y>1&&(R[a++]=R[x++]))}break}}break}}while(r<n&&a<o);r-=y=u>>3,h&=(1<<(u-=y<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<o?o-a+257:257-(a-o),S.hold=h,S.bits=u},x=15,A=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),E=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),R=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),S=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),T=function(e,t,r,n,a,i,o,s){var c,l,d,f,h,u,p,w,b,k=s.bits,m=0,v=0,y=0,g=0,_=0,T=0,U=0,Z=0,C=0,O=0,I=null,H=new Uint16Array(16),N=new Uint16Array(16),B=null;for(m=0;m<=x;m++)H[m]=0;for(v=0;v<n;v++)H[t[r+v]]++;for(_=k,g=x;g>=1&&0===H[g];g--);if(_>g&&(_=g),0===g)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(y=1;y<g&&0===H[y];y++);for(_<y&&(_=y),Z=1,m=1;m<=x;m++)if(Z<<=1,(Z-=H[m])<0)return-1;if(Z>0&&(0===e||1!==g))return-1;for(N[1]=0,m=1;m<x;m++)N[m+1]=N[m]+H[m];for(v=0;v<n;v++)0!==t[r+v]&&(o[N[t[r+v]]++]=v);if(0===e?(I=B=o,u=20):1===e?(I=A,B=E,u=257):(I=R,B=S,u=0),O=0,v=0,m=y,h=i,T=_,U=0,d=-1,f=(C=1<<_)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){p=m-U,o[v]+1<u?(w=0,b=o[v]):o[v]>=u?(w=B[o[v]-u],b=I[o[v]-u]):(w=96,b=0),c=1<<m-U,y=l=1<<T;do{a[h+(O>>U)+(l-=c)]=p<<24|w<<16|b|0}while(0!==l);for(c=1<<m-1;O&c;)c>>=1;if(0!==c?(O&=c-1,O+=c):O=0,v++,0==--H[m]){if(m===g)break;m=t[r+o[v]]}if(m>_&&(O&f)!==d){for(0===U&&(U=_),h+=y,Z=1<<(T=m-U);T+U<g&&!((Z-=H[T+U])<=0);)T++,Z<<=1;if(C+=1<<T,1===e&&C>852||2===e&&C>592)return 1;a[d=O&f]=_<<24|T<<16|h-i|0}}return 0!==O&&(a[h+O]=m-U<<24|64<<16|0),s.bits=_,0},U=d.Z_FINISH,Z=d.Z_BLOCK,C=d.Z_TREES,O=d.Z_OK,I=d.Z_STREAM_END,H=d.Z_NEED_DICT,N=d.Z_STREAM_ERROR,B=d.Z_DATA_ERROR,D=d.Z_MEM_ERROR,F=d.Z_BUF_ERROR,L=d.Z_DEFLATED,M=16180,z=16190,P=16191,j=16192,V=16194,K=16199,G=16200,W=16206,Y=16209,J=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function X(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var $,q,Q=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<M||t.mode>16211?1:0},ee=function(e){if(Q(e))return N;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=M,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,O},te=function(e){if(Q(e))return N;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ee(e)},re=function(e,t){var r;if(Q(e))return N;var n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?N:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,te(e))},ne=function(e,t){if(!e)return N;var r=new X;e.state=r,r.strm=e,r.window=null,r.mode=M;var n=re(e,t);return n!==O&&(e.state=null),n},ae=!0,ie=function(e){if(ae){$=new Int32Array(512),q=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(T(1,e.lens,0,288,$,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;T(2,e.lens,0,32,q,0,e.work,{bits:5}),ae=!1}e.lencode=$,e.lenbits=9,e.distcode=q,e.distbits=5},oe=function(e,t,r,n){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},se={inflateReset:te,inflateReset2:re,inflateResetKeep:ee,inflateInit:function(e){return ne(e,15)},inflateInit2:ne,inflate:function(e,t){var r,n,a,i,s,l,d,f,h,u,p,w,b,k,m,v,y,g,x,A,E,R,S,X,$=0,q=new Uint8Array(4),ee=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Q(e)||!e.output||!e.input&&0!==e.avail_in)return N;(r=e.state).mode===P&&(r.mode=j),s=e.next_out,a=e.output,d=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,f=r.hold,h=r.bits,u=l,p=d,R=O;e:for(;;)switch(r.mode){case M:if(0===r.wrap){r.mode=j;break}for(;h<16;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(2&r.wrap&&35615===f){0===r.wbits&&(r.wbits=15),r.check=0,q[0]=255&f,q[1]=f>>>8&255,r.check=c(r.check,q,2,0),f=0,h=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=Y;break}if((15&f)!==L){e.msg="unknown compression method",r.mode=Y;break}if(h-=4,E=8+(15&(f>>>=4)),0===r.wbits&&(r.wbits=E),E>15||E>r.wbits){e.msg="invalid window size",r.mode=Y;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&f?16189:P,f=0,h=0;break;case 16181:for(;h<16;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(r.flags=f,(255&r.flags)!==L){e.msg="unknown compression method",r.mode=Y;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Y;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&4&r.wrap&&(q[0]=255&f,q[1]=f>>>8&255,r.check=c(r.check,q,2,0)),f=0,h=0,r.mode=16182;case 16182:for(;h<32;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}r.head&&(r.head.time=f),512&r.flags&&4&r.wrap&&(q[0]=255&f,q[1]=f>>>8&255,q[2]=f>>>16&255,q[3]=f>>>24&255,r.check=c(r.check,q,4,0)),f=0,h=0,r.mode=16183;case 16183:for(;h<16;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&4&r.wrap&&(q[0]=255&f,q[1]=f>>>8&255,r.check=c(r.check,q,2,0)),f=0,h=0,r.mode=16184;case 16184:if(1024&r.flags){for(;h<16;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&4&r.wrap&&(q[0]=255&f,q[1]=f>>>8&255,r.check=c(r.check,q,2,0)),f=0,h=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((w=r.length)>l&&(w=l),w&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+w),E)),512&r.flags&&4&r.wrap&&(r.check=c(r.check,n,w,i)),l-=w,i+=w,r.length-=w),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===l)break e;w=0;do{E=n[i+w++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E))}while(E&&w<l);if(512&r.flags&&4&r.wrap&&(r.check=c(r.check,n,w,i)),l-=w,i+=w,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===l)break e;w=0;do{E=n[i+w++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E))}while(E&&w<l);if(512&r.flags&&4&r.wrap&&(r.check=c(r.check,n,w,i)),l-=w,i+=w,E)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;h<16;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(4&r.wrap&&f!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Y;break}f=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=P;break;case 16189:for(;h<32;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}e.adler=r.check=J(f),f=0,h=0,r.mode=z;case z:if(0===r.havedict)return e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=f,r.bits=h,H;e.adler=r.check=1,r.mode=P;case P:if(t===Z||t===C)break e;case j:if(r.last){f>>>=7&h,h-=7&h,r.mode=W;break}for(;h<3;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}switch(r.last=1&f,h-=1,3&(f>>>=1)){case 0:r.mode=16193;break;case 1:if(ie(r),r.mode=K,t===C){f>>>=2,h-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=Y}f>>>=2,h-=2;break;case 16193:for(f>>>=7&h,h-=7&h;h<32;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Y;break}if(r.length=65535&f,f=0,h=0,r.mode=V,t===C)break e;case V:r.mode=16195;case 16195:if(w=r.length){if(w>l&&(w=l),w>d&&(w=d),0===w)break e;a.set(n.subarray(i,i+w),s),l-=w,i+=w,d-=w,s+=w,r.length-=w;break}r.mode=P;break;case 16196:for(;h<14;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(r.nlen=257+(31&f),f>>>=5,h-=5,r.ndist=1+(31&f),f>>>=5,h-=5,r.ncode=4+(15&f),f>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Y;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;h<3;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}r.lens[ee[r.have++]]=7&f,f>>>=3,h-=3}for(;r.have<19;)r.lens[ee[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},R=T(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,R){e.msg="invalid code lengths set",r.mode=Y;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;v=($=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,y=65535&$,!((m=$>>>24)<=h);){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(y<16)f>>>=m,h-=m,r.lens[r.have++]=y;else{if(16===y){for(X=m+2;h<X;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(f>>>=m,h-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=Y;break}E=r.lens[r.have-1],w=3+(3&f),f>>>=2,h-=2}else if(17===y){for(X=m+3;h<X;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}h-=m,E=0,w=3+(7&(f>>>=m)),f>>>=3,h-=3}else{for(X=m+7;h<X;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}h-=m,E=0,w=11+(127&(f>>>=m)),f>>>=7,h-=7}if(r.have+w>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Y;break}for(;w--;)r.lens[r.have++]=E}}if(r.mode===Y)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Y;break}if(r.lenbits=9,S={bits:r.lenbits},R=T(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,R){e.msg="invalid literal/lengths set",r.mode=Y;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},R=T(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,R){e.msg="invalid distances set",r.mode=Y;break}if(r.mode=K,t===C)break e;case K:r.mode=G;case G:if(l>=6&&d>=258){e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=f,r.bits=h,_(e,p),s=e.next_out,a=e.output,d=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,f=r.hold,h=r.bits,r.mode===P&&(r.back=-1);break}for(r.back=0;v=($=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,y=65535&$,!((m=$>>>24)<=h);){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(v&&0==(240&v)){for(g=m,x=v,A=y;v=($=r.lencode[A+((f&(1<<g+x)-1)>>g)])>>>16&255,y=65535&$,!(g+(m=$>>>24)<=h);){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}f>>>=g,h-=g,r.back+=g}if(f>>>=m,h-=m,r.back+=m,r.length=y,0===v){r.mode=16205;break}if(32&v){r.back=-1,r.mode=P;break}if(64&v){e.msg="invalid literal/length code",r.mode=Y;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(X=r.extra;h<X;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;v=($=r.distcode[f&(1<<r.distbits)-1])>>>16&255,y=65535&$,!((m=$>>>24)<=h);){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(0==(240&v)){for(g=m,x=v,A=y;v=($=r.distcode[A+((f&(1<<g+x)-1)>>g)])>>>16&255,y=65535&$,!(g+(m=$>>>24)<=h);){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}f>>>=g,h-=g,r.back+=g}if(f>>>=m,h-=m,r.back+=m,64&v){e.msg="invalid distance code",r.mode=Y;break}r.offset=y,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(X=r.extra;h<X;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Y;break}r.mode=16204;case 16204:if(0===d)break e;if(w=p-d,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Y;break}w>r.wnext?(w-=r.wnext,b=r.wsize-w):b=r.wnext-w,w>r.length&&(w=r.length),k=r.window}else k=a,b=s-r.offset,w=r.length;w>d&&(w=d),d-=w,r.length-=w;do{a[s++]=k[b++]}while(--w);0===r.length&&(r.mode=G);break;case 16205:if(0===d)break e;a[s++]=r.length,d--,r.mode=G;break;case W:if(r.wrap){for(;h<32;){if(0===l)break e;l--,f|=n[i++]<<h,h+=8}if(p-=d,e.total_out+=p,r.total+=p,4&r.wrap&&p&&(e.adler=r.check=r.flags?c(r.check,a,p,s-p):o(r.check,a,p,s-p)),p=d,4&r.wrap&&(r.flags?f:J(f))!==r.check){e.msg="incorrect data check",r.mode=Y;break}f=0,h=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;h<32;){if(0===l)break e;l--,f+=n[i++]<<h,h+=8}if(4&r.wrap&&f!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Y;break}f=0,h=0}r.mode=16208;case 16208:R=I;break e;case Y:R=B;break e;case 16210:return D;default:return N}return e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=f,r.bits=h,(r.wsize||p!==e.avail_out&&r.mode<Y&&(r.mode<W||t!==U))&&oe(e,e.output,e.next_out,p-e.avail_out),u-=e.avail_in,p-=e.avail_out,e.total_in+=u,e.total_out+=p,r.total+=p,4&r.wrap&&p&&(e.adler=r.check=r.flags?c(r.check,a,p,e.next_out-p):o(r.check,a,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===P?128:0)+(r.mode===K||r.mode===V?256:0),(0===u&&0===p||t===U)&&R===O&&(R=F),R},inflateEnd:function(e){if(Q(e))return N;var t=e.state;return t.window&&(t.window=null),e.state=null,O},inflateGetHeader:function(e,t){if(Q(e))return N;var r=e.state;return 0==(2&r.wrap)?N:(r.head=t,t.done=!1,O)},inflateSetDictionary:function(e,t){var r,n=t.length;return Q(e)||0!==(r=e.state).wrap&&r.mode!==z?N:r.mode===z&&o(1,t,n,0)!==r.check?B:oe(e,t,n,n)?(r.mode=16210,D):(r.havedict=1,O)},inflateInfo:"pako inflate (from Nodeca project)"};var ce=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},le=Object.prototype.toString,de=d.Z_NO_FLUSH,fe=d.Z_FINISH,he=d.Z_OK,ue=d.Z_STREAM_END,pe=d.Z_NEED_DICT,we=d.Z_STREAM_ERROR,be=d.Z_DATA_ERROR,ke=d.Z_MEM_ERROR;function me(e){this.options=h({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var r=se.inflateInit2(this.strm,t.windowBits);if(r!==he)throw new Error(l[r]);if(this.header=new ce,se.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=k(t.dictionary):"[object ArrayBuffer]"===le.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=se.inflateSetDictionary(this.strm,t.dictionary))!==he))throw new Error(l[r])}function ve(e,t){var r=new me(t);if(r.push(e),r.err)throw r.msg||l[r.err];return r.result}me.prototype.push=function(e,t){var r,n,a,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?fe:de,"[object ArrayBuffer]"===le.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r=se.inflate(i,n))===pe&&s&&((r=se.inflateSetDictionary(i,s))===he?r=se.inflate(i,n):r===be&&(r=pe));i.avail_in>0&&r===ue&&i.state.wrap>0&&0!==e[i.next_in];)se.inflateReset(i),r=se.inflate(i,n);switch(r){case we:case be:case pe:case ke:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===ue))if("string"===this.options.to){var c=v(i.output,i.next_out),l=i.next_out-c,d=m(i.output,c);i.next_out=l,i.avail_out=o-l,l&&i.output.set(i.output.subarray(c,c+l),0),this.onData(d)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==he||0!==a){if(r===ue)return r=se.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},me.prototype.onData=function(e){this.chunks.push(e)},me.prototype.onEnd=function(e){e===he&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ye={Inflate:me,inflate:ve,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ve(e,t)},ungzip:ve,constants:d}.inflateRaw,ge=function(){function n(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.bytecode=this.decodeBytecode(e),this.strings=t,this.dependencies=a.map((function(e){return"window"!==e?e:globalThis})),this.opcodeHandlers=[],this.stack=[],this.localVariables=[],this.lookUpTable=r,this.exitToPreviousContext=[function(e){e.programCounter=e.bytecode.length+1}],this.programCounter=0,this.initOpcodeHandlers()}var i,o,s;return i=n,(o=[{key:"decodeBytecode",value:function(e){var t;t="undefined"!=typeof window?atob(e):Buffer.from(e,"base64").toString("ascii");for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return ye(r)}},{key:"byteArrayToLong",value:function(e){return e.reverse(),e.reduce((function(e,t){return 256*e+t}))}},{key:"load8ByteArray",value:function(){for(var e=[],t=0;t<8;t++)e.push(this.bytecode[this.programCounter++]);return Uint8Array.from(e)}},{key:"getValue",value:function(){switch(this.bytecode[this.programCounter++]){case 0:var e=this.byteArrayToLong(this.load8ByteArray());return this.strings[e];case 6:return[];case 7:return{};case 1:return this.byteArrayToLong(this.load8ByteArray());case 2:return this.stack.pop();case 4:var t=this.bytecode[this.programCounter++];return this.dependencies[t];case 3:var r=this.bytecode[this.programCounter++];return this.localVariables[r]}}},{key:"initOpcodeHandlers",value:function(){var t=this;this.opcodeHandlers[0]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r+t)},this.opcodeHandlers[1]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r-t)},this.opcodeHandlers[2]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r*t)},this.opcodeHandlers[3]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r/t)},this.opcodeHandlers[4]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r%t)},this.opcodeHandlers[5]=function(e){var t=e.stack.pop();e.stack.push(!t)},this.opcodeHandlers[14]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r==t)},this.opcodeHandlers[6]=function(e){var t=e.getValue();e.localVariables[t]=e.getValue()},this.opcodeHandlers[7]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r[t])},this.opcodeHandlers[13]=function(e){var n=e.stack.pop(),a=e.stack.pop();e.stack.push(a.call.apply(a,[t].concat(r(n))))},this.opcodeHandlers[24]=function(e){e.stack.push(e.getValue())},this.opcodeHandlers[25]=function(e){var t=e.getValue();e.localVariables[t]=e.stack.pop()},this.opcodeHandlers[26]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(new r(t))},this.opcodeHandlers[19]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r!==t)},this.opcodeHandlers[27]=function(e){var t=e.stack.pop();e.stack.push([t])},this.opcodeHandlers[23]=function(e){var t=e.stack.pop();e.stack.push(!t)},this.opcodeHandlers[12]=function(t){var r=t.stack.pop();t.stack.push(e(r))},this.opcodeHandlers[22]=function(e){var t=e.stack.pop();if(e.stack.pop()){var r=e.programCounter;e.exitToPreviousContext.unshift((function(e){e.programCounter=r}));var n=e.lookUpTable[t];if(void 0===n)throw"ILLEGAL JMP";e.programCounter=n}},this.opcodeHandlers[28]=function(e){e.exitToPreviousContext[0](e),e.exitToPreviousContext.shift()},this.opcodeHandlers[35]=function(e){var t=e.stack.pop(),r=e.stack.pop();e.stack.push(r&&t)},this.opcodeHandlers[36]=function(e){var t=e.stack.pop(),r=e.stack.pop(),n=e.stack.pop();e.stack.push(n.apply(r,t))},this.opcodeHandlers[37]=function(e){var n,a=e.stack.pop(),i=e.stack.pop(),o=e.stack.pop();e.stack.push((n=o[i]).call.apply(n,[t].concat(r(a))))}}},{key:"getInstructionHandler",value:function(e){return this.opcodeHandlers[e]}},{key:"start",value:function(){for(;this.programCounter<this.bytecode.length;){var e=this.programCounter++,t=this.bytecode[e],r=this.getInstructionHandler(t);if(void 0===r)throw"UNKNOWN_OPCODE";r(this)}}}])&&t(i.prototype,o),s&&t(i,s),Object.defineProperty(i,"prototype",{writable:!1}),n}();return ge}));
